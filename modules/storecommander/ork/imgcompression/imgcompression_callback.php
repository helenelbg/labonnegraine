<?php
/*
StoreCommander
*/
 goto PnxyK; GbJfX: qbhhm: goto LUTT8; wuPLZ: if (!($local_auth !== $distant_auth)) { goto BDq5F; } goto If_Vo; W2QtK: rmK8v: goto nQyNA; I2qzR: wnhf6: goto Uj2hQ; yJlzy: $local_version = "\x32\56\60\56\x30"; goto sPFkL; KT3ga: $distant_auth = (string) $_SERVER["\x48\124\x54\120\x5f\117\103\111\101\125\x54\x48"]; goto ENwpy; cZOqs: Logger::addLog($log_id . "\x20\x45\122\122\x3a\40\115\x69\x73\163\151\156\147\x20\160\x61\x72\141\x6d\40\x3a\40" . implode("\x2c", $param_err), 1, null, null, null, true); goto TK_zI; V3AGx: BDq5F: goto RFZUl; wu58e: mxZzT: goto KT3ga; hlCEW: SCI::addLog($log_id . "\x20\105\x52\x52\72\40\x53\x43\x20\146\x6f\x6c\144\145\162\x20\x6e\x6f\164\x20\146\x6f\165\156\144", 1, null, null, null, true); goto alQgC; QTPkJ: $param_err[] = "\163\x65\x63\x72\145\x74"; goto g6zHC; em2a5: if (array_key_exists("\x48\124\124\x50\x5f\117\x43\111\x56\105\122\x53\x49\117\x4e", $_SERVER)) { goto fgNeE; } goto K9BQH; ikOqr: $sc_folder_hash = Configuration::get("\x53\103\137\106\x4f\114\x44\x45\x52\x5f\110\x41\123\x48", null, 0, 0); goto UgM6U; FWR26: Wq1kT: goto XPFsj; J7Vgt: $local_auth = Configuration::get("\x53\103\137\x55\116\111\121\x55\x45\137\x49\104", null, 0, 0); goto yJlzy; qqxA_: if (!empty($_SERVER["\110\124\124\x50\x5f\x4f\x43\111\126\x45\x52\x53\x49\117\x4e"])) { goto hWIn9; } goto nAZ6T; TK_zI: goto t7Ryo; goto mB4eE; sdKRp: hWIn9: goto NlnZ5; rt1o6: if (array_key_exists("\x48\124\x54\x50\x5f\117\x43\x49\x41\x55\124\110", $_SERVER)) { goto m15MP; } goto J8NTl; tGxdT: LPKmf: goto N0GWU; NKQWM: uEfds: goto j9bQQ; NlnZ5: if (!empty($_SERVER["\110\x54\124\x50\x5f\x4f\103\x49\x53\x45\x43\122\105\x54"])) { goto r2UPk; } goto QTPkJ; eVNQY: $param_err[] = "\x73\x65\x63\162\145\164"; goto GbJfX; KOw_M: header("\110\124\124\120\57\x31\x2e\60\40\64\x30\61\x20\105\x6d\x70\x74\x79\x20\x70\x61\x72\x61\155\145\x74\x65\x72"); goto XIWij; M0Cz0: $param_err = array(); goto rt1o6; Pkivp: m15MP: goto em2a5; kVAvU: foreach ($distant_images as $distant_image) { $local_cached_image[] = (int) $distant_image["\x69\x64\151\x6d\147"]; VvO4A: } goto hFcdm; Y7l9L: eSjSF: goto Ho7Fp; XIWij: die; goto wu58e; fjYsT: die; goto F1iy3; kisDm: goto L4p1w; goto EJp3h; ugaGS: gCH8_: goto WKRKi; j9bQQ: if (is_array($distant_images)) { goto wnhf6; } goto toSgR; wSWuI: $param_err[] = "\x76\x65\x72\x73\151\157\x6e"; goto tGxdT; B4AmS: PrestaShopLogger::addLog($log_id . "\x20\x45\x52\122\72\x20\115\151\163\163\x69\156\x67\x20\160\x61\162\141\155\40\72\x20" . implode("\x2c", $param_err), 1, null, null, null, true); goto VKlPe; BoZlx: $local_images = Db::getInstance()->ExecuteS("\x53\105\x4c\105\103\x54\40\52\12\40\x20\40\40\x20\40\x20\x20\x20\40\40\40\x20\x20\40\x20\40\40\x20\40\x20\x20\x20\40\x20\40\40\x20\x20\40\40\x20\40\40\x20\x20\x20\40\x20\40\40\40\40\x20\106\x52\117\x4d\40" . _DB_PREFIX_ . "\x73\164\157\162\145\143\157\155\137\x69\x6d\141\147\145\146\151\154\x65\12\40\40\x20\40\x20\40\40\x20\40\40\40\x20\x20\x20\x20\40\x20\40\x20\x20\x20\x20\40\40\x20\40\40\x20\40\40\40\40\x20\40\x20\40\40\x20\40\x20\x20\40\x20\40\127\x48\x45\122\105\40\151\144\137\x73\164\157\x72\145\x63\x6f\x6d\137\x69\155\x61\x67\x65\x66\x69\154\x65\40\111\x4e\40\50" . pSQL(implode("\54", $local_cached_image)) . "\x29"); goto CsLU3; UgM6U: $CRON = true; goto HiFwo; nQyNA: require_once _PS_MODULE_DIR_ . $current_sc_module_folder_name . "\x2f" . $sc_folder_hash . "\57\123\x43\x2f\151\x6e\151\x74\x5f\163\143\x2e\x70\x68\x70"; goto aG4iP; K9BQH: $param_err[] = "\x76\x65\162\x73\151\x6f\x6e"; goto TEyfv; t7Xm0: Logger::addLog($log_id . "\40\x45\x52\122\x3a\40\x57\162\x6f\x6e\x67\x20\160\x61\162\141\155\40\x3a\x20" . implode("\54", $param_err), 1, null, null, null, true); goto uAc9U; HiFwo: $_POST = array("\x61\x63\164\151\x6f\156" => "\x6d\x61\160\160\x69\156\x67\137\160\x72\157\143\x65\163\x73", "\x61\x6a\x61\x78" => 1); goto q6ONi; BLTpE: DiFCI: goto KOw_M; J8NTl: $param_err[] = "\141\165\x74\x68"; goto Pkivp; N0GWU: if (!($local_secret !== $distant_secret)) { goto uEfds; } goto JZjkL; TzdUf: if (version_compare(_PS_VERSION_, "\61\56\x36\x2e\x30\56\x33", "\x3e\x3d")) { goto AdrlM; } goto fQ_Nf; HaOxZ: if (file_exists(_PS_MODULE_DIR_ . $current_sc_module_folder_name . "\x2f" . $sc_folder_hash)) { goto rmK8v; } goto hlCEW; WKRKi: PrestaShopLogger::addLog($log_id . "\40\105\122\x52\72\x20\x57\162\x6f\156\147\x20\160\x61\x72\x61\155\x20\72\40" . implode("\x2c", $param_err), 1, null, null, null, true); goto KtJG4; sPFkL: $local_secret = "\170\165\x44\114\147\167\62\x48\127\164\114\x6b\x65\x72\107\125\x39\x73\x35\x46\x67\107\x4f\143\x32\x42\x66\x35\x37\x36\x6e\x44"; goto hEsEB; alQgC: goto HfVFa; goto W2QtK; KtJG4: paYZf: goto VBjy_; XRDoG: $param_err = array(); goto Wd8LD; loupT: $sql = array(); goto MX8__; hFcdm: CbK_u: goto BoZlx; wRL2T: if (array_key_exists("\110\x54\x54\x50\137\x4f\103\111\123\105\x43\122\x45\x54", $_SERVER)) { goto qbhhm; } goto eVNQY; LUTT8: if (version_compare(_PS_VERSION_, "\61\x2e\x36\56\60\56\63", "\76\x3d")) { goto EvxAA; } goto cZOqs; GJTJ9: PrestaShopLogger::addLog($log_id . "\x20\105\122\x52\72\x20\x45\x6d\160\x74\171\x20\x70\141\162\x61\x6d\40\72\x20" . implode("\54", $param_err), 1, null, null, null, true); goto BLTpE; aifQ2: c7GxK: goto TzdUf; oX_0H: $local_images = $tmp; goto EA8Pl; Ho7Fp: HfVFa: goto VLUom; EA8Pl: L4p1w: goto loupT; F1iy3: WqJIv: goto ikOqr; toSgR: $param_err[] = "\144\x69\x73\164\141\x6e\x74\x5f\x69\x6d\141\147\x65\x73"; goto I2qzR; RFZUl: if (!($local_version !== $distant_version)) { goto LPKmf; } goto wSWuI; FvAcK: $domain_compressor = "\x62\67\x32\60\143\x33\144\x37\71\x62\x30\x31\65\66\x31\x63\71\x30\61\62\63\x31\64\144\x63\62\x34\66\63\63\x35\x34\143\x32\x38\62\x34\66\71\x62\62\x61\x39\63\x35\x37\x62\x63\144\x37\142\x38\61\66\x36\x30\67\67\x38\141\x63\60\x35\146"; goto eukFA; PEDod: header("\110\x54\x54\x50\x2f\x31\56\60\40\64\x30\61\40\115\151\x73\163\x69\x6e\x67\x20\160\x61\x72\141\x6d\x65\164\x65\162"); goto ZSg10; EzBPQ: try { goto iK0D9; EAKbB: if (!($percent_error > 30)) { goto qgQBn; } goto M2Ikm; wfny0: U7pUR: goto PEpEJ; PqHny: $data = array("\x4c\111\x43\105\x4e\123\105" => "\x23", "\x44\117\x4d\101\x49\116" => getShopProtocol() . $access_details["\x64\157\x6d\141\x69\156"] . __PS_BASE_URI__, "\123\x43\137\125\x4e\x49\121\125\x45\x5f\x49\x44" => SCI::getConfigurationValue("\123\x43\137\x55\x4e\x49\121\125\105\137\111\104"), "\143\157\x6d\160\162\145\163\163\151\157\156\x5f\141\143\x74\151\x76\145" => 3); goto zRPfw; VwsPI: $percent_error = (double) round($error_rows / $treated_rows * 100, 0); goto EAKbB; RTnWQ: $treated_rows = (int) $treated_rows[0]["\156\142"]; goto VwsPI; hUcej: makeCallToOurApi("\x43\157\x6d\160\x72\145\x73\x73\151\157\156\57\x41\x63\x74\151\x76\145", array(), $data); goto mrPXm; zRPfw: SCI::updateConfigurationValue("\x53\103\137\x49\115\101\x47\x45\x43\117\115\x50\x52\105\123\x53\111\x4f\116\137\x41\103\x54\x49\x56\x45", (int) $data["\x63\157\155\160\162\145\163\163\151\x6f\156\x5f\x61\143\164\x69\x76\145"]); goto hUcej; mrPXm: qgQBn: goto wfny0; xa0_b: if (!$savingDone) { goto U7pUR; } goto zCDfw; unz95: foreach ($sql as $rowSql) { $savingDone += (int) Db::getInstance()->execute($rowSql); Q0G4M: } goto mcKM9; M2Ikm: $access_details = access_details(); goto PqHny; IttiN: $treated_rows = Db::getInstance()->ExecuteS("\x53\x45\x4c\x45\x43\124\40\103\117\x55\116\x54\50\151\x64\137\x73\x74\x6f\162\x65\143\157\155\137\151\155\x61\x67\145\146\x69\x6c\145\51\40\x61\x73\40\156\x62\12\x20\40\40\x20\x20\40\40\40\40\40\x20\x20\40\x20\x20\x20\x20\40\40\40\x20\40\40\40\40\x20\x20\40\40\40\40\40\40\x20\40\40\40\40\40\40\40\x20\x20\x20\x20\x20\x20\x20\40\x20\x20\40\x20\40\40\x20\x20\40\x20\40\106\x52\x4f\x4d\x20" . _DB_PREFIX_ . "\163\x74\157\x72\x65\x63\x6f\x6d\x5f\x69\x6d\141\x67\145\146\x69\154\145\12\40\40\40\x20\x20\x20\40\x20\40\x20\40\40\x20\x20\x20\x20\x20\40\x20\x20\40\x20\x20\x20\x20\40\40\40\x20\x20\40\x20\40\40\x20\x20\40\40\x20\x20\x20\x20\x20\x20\x20\x20\40\x20\x20\x20\x20\x20\x20\40\40\40\x20\x20\40\x20\x57\110\105\x52\x45\x20\x73\x74\x61\164\x75\163\x20\x3e\40\x30\12\40\40\x20\40\x20\40\x20\x20\40\40\x20\40\x20\40\x20\x20\40\x20\x20\40\x20\x20\x20\40\x20\40\40\40\40\40\40\x20\40\40\40\40\40\x20\x20\x20\40\40\x20\x20\40\x20\40\x20\40\40\x20\40\40\40\x20\40\40\x20\x20\x20\x4f\122\x44\x45\122\x20\x42\x59\40\x64\x61\164\x65\x5f\x63\x61\154\154\x62\x61\x63\x6b\x20\x44\105\x53\103\xa\x20\x20\x20\x20\x20\40\x20\x20\x20\x20\40\40\x20\40\x20\40\40\40\x20\40\40\40\40\40\x20\40\40\x20\x20\40\x20\40\40\40\x20\40\x20\x20\40\x20\x20\x20\40\x20\x20\40\x20\x20\40\x20\x20\x20\x20\40\x20\x20\x20\x20\x20\40\x4c\x49\x4d\111\x54\40\x31\60\x30\60"); goto xfp8W; zCDfw: Db::getInstance()->Execute("\125\120\104\101\124\x45\x20" . _DB_PREFIX_ . "\163\x74\x6f\162\145\x63\157\x6d\137\x69\x6d\x61\147\145\x66\x69\154\145\12\x20\x20\x20\40\40\40\x20\x20\x20\x20\x20\x20\40\40\x20\40\x20\x20\x20\40\x20\40\40\40\40\x20\x20\x20\40\x20\x20\40\40\x20\40\40\x20\x20\40\40\40\40\40\40\123\x45\124\40\x73\151\172\x65\137\x73\141\x76\x65\144\x20\x3d\40\x49\106\50\x73\151\x7a\145\x5f\143\157\x6d\160\x72\x65\163\163\x65\x64\x20\76\x20\60\54\x73\x69\x7a\145\137\157\162\151\x67\151\x6e\55\x73\x69\172\145\137\x63\157\x6d\x70\162\x65\x73\163\x65\144\x2c\60\x29\54\xa\x20\x20\40\40\40\x20\x20\40\x20\40\40\40\40\40\40\40\40\40\40\x20\x20\40\40\x20\x20\40\40\40\40\x20\x20\40\x20\x20\x20\40\x20\x20\x20\x20\40\40\x20\40\144\x61\x74\x65\137\143\x61\x6c\x6c\x62\141\x63\153\x3d\x4e\x4f\127\x28\51\xa\40\x20\x20\x20\40\40\40\40\40\x20\40\x20\x20\40\40\40\x20\40\x20\x20\x20\40\x20\x20\40\x20\x20\40\x20\x20\40\x20\x20\x20\40\40\40\40\40\x20\x20\40\40\x20\127\x48\x45\122\105\x20\151\144\137\x73\x74\x6f\x72\145\x63\157\155\137\x69\x6d\x61\x67\145\x66\x69\x6c\x65\40\x49\116\x20\x28" . pSQL(implode("\54", $local_cached_image)) . "\x29"); goto MWGyE; xfp8W: $error_rows = (int) $error_rows[0]["\156\142"]; goto RTnWQ; MWGyE: $error_rows = Db::getInstance()->ExecuteS("\123\105\114\x45\x43\x54\40\x43\117\x55\116\x54\x28\151\144\137\163\x74\x6f\x72\x65\x63\x6f\155\x5f\x69\x6d\141\x67\145\x66\x69\x6c\x65\x29\x20\141\163\x20\156\x62\xa\40\40\40\40\x20\40\40\x20\40\x20\40\x20\x20\40\x20\40\x20\x20\40\x20\40\x20\x20\x20\40\x20\40\x20\40\40\40\x20\x20\x20\40\x20\40\x20\40\x20\x20\x20\40\x20\x20\x20\40\40\40\40\40\x20\40\x20\x20\40\40\x20\x20\x20\106\x52\x4f\115\40" . _DB_PREFIX_ . "\163\x74\157\162\x65\x63\x6f\155\x5f\x69\155\141\147\145\146\x69\x6c\145\12\x20\x20\40\40\x20\x20\x20\40\40\x20\40\40\x20\x20\40\40\x20\x20\x20\x20\40\x20\x20\x20\x20\40\x20\40\40\x20\40\40\x20\40\40\40\x20\40\40\40\x20\x20\x20\x20\40\x20\x20\x20\40\40\x20\x20\40\x20\40\40\x20\40\x20\40\127\x48\x45\x52\105\x20\x73\164\141\164\x75\163\40\x3d" . (int) $compression_status["\x65\162\x72\x6f\162"] . "\12\40\x20\x20\40\x20\x20\40\x20\40\x20\40\x20\x20\40\40\40\40\x20\40\x20\40\40\40\40\x20\40\40\x20\40\x20\x20\40\x20\x20\x20\x20\40\x20\x20\x20\40\x20\x20\x20\40\40\x20\40\x20\40\40\40\x20\40\40\x20\x20\x20\40\x20\101\x4e\x44\x20\143\x6f\x75\x6e\164\137\143\157\x6d\x70\162\145\x73\163\x69\x6f\x6e\x5f\162\x65\x71\x75\x65\x73\x74\40\x3d\40\63\12\40\x20\40\x20\x20\40\x20\40\x20\40\40\x20\x20\40\40\40\x20\40\x20\40\40\40\40\40\x20\40\x20\40\x20\40\x20\40\40\40\40\40\40\40\40\x20\x20\40\x20\40\40\x20\40\x20\40\x20\40\x20\x20\x20\x20\x20\x20\40\x20\40\x4f\122\x44\x45\122\40\102\131\40\144\x61\x74\145\x5f\143\141\154\x6c\142\141\143\153\x20\104\105\123\x43\xa\40\40\x20\x20\x20\40\x20\40\40\x20\x20\x20\40\x20\40\40\40\x20\40\40\40\40\x20\x20\x20\x20\40\x20\x20\x20\40\x20\x20\x20\40\x20\x20\40\40\40\x20\x20\x20\40\x20\40\40\40\x20\40\x20\40\x20\40\x20\x20\40\x20\x20\40\x4c\111\x4d\x49\x54\40\61\60\60\60"); goto IttiN; mcKM9: hvL5i: goto xa0_b; iK0D9: $savingDone = 0; goto unz95; PEpEJ: } catch (Exception $e) { SCI::addLog($log_id . "\40\105\122\x52\137\123\121\x4c\72\40\40\165\x70\144\x61\x74\x65\137\x64\x62\40" . $e->getMessage(), 1, null, null, null, true); } goto Y7l9L; MX8__: foreach ($distant_images as $distant_image) { goto ESk7Y; o_80T: goto kYl3M; goto a4duF; kZEJ8: cu1HE: goto xydXi; a4duF: CKrRV: goto Zpc9g; DuI27: o9mpx: goto kZEJ8; FKiF1: nbCdo: goto B9Uwk; KaDQQ: if (array_key_exists($distant_image["\151\x64\151\155\x67"], $local_images)) { goto CKrRV; } goto qMPCH; qMPCH: SCI::addLog($log_id . "\x20\x45\122\x52\x5f\x49\115\x47\x3a\x20\151\155\141\147\x65\40\156\157\164\x20\x66\157\x75\156\x64\x20\x69\156\x20\x6c\x6f\143\x61\154\x20\x3a\x20" . $distant_image["\151\144\x69\155\147"] . "\55" . $distant_image["\x75\x72\154"], 1, null, null, null, true); goto o_80T; Zpc9g: $ork_info = array("\x6f\162\x6b\x5f\x73\164\x61\x74\165\163" => $distant_image["\157\x72\x6b\x5f\163\x74\x61\x74\x75\163"], "\157\x72\153\x5f\163\x74\141\x74\x75\163\137\x6d\145\163\x73\141\147\145" => $distant_image["\157\162\x6b\x5f\163\141\x74\165\x73\x5f\x6d\145\163\163\141\x67\145"]); goto b4gh3; ESk7Y: if ($distant_image["\141\x75\164\x68"] == $local_auth) { goto bBdBV; } goto KWWSI; b4gh3: switch ((int) $distant_image["\157\162\x6b\x5f\163\164\x61\164\165\x73"]) { case 3: $sql[] = "\x55\120\x44\x41\124\105\x20" . _DB_PREFIX_ . "\x73\x74\157\x72\145\143\157\x6d\x5f\x69\155\141\x67\145\146\151\154\145\x20\123\105\124\x20\x60\x73\x74\x61\164\165\163\140\40\75\40" . (int) $compression_status["\145\162\162\157\x72"] . "\54\40\140\157\x72\153\137\151\156\x66\157\140\x3d\40\42" . pSQL(json_encode($ork_info)) . "\x22\x20\127\x48\105\x52\105\40\x60\x69\x64\137\x73\x74\157\x72\x65\143\x6f\155\x5f\x69\155\x61\x67\x65\x66\151\154\145\140\x20\75\40" . (int) $distant_image["\151\144\x69\x6d\x67"]; goto nbCdo; case 4: $sql[] = "\125\120\104\101\124\x45\x20" . _DB_PREFIX_ . "\x73\164\157\x72\x65\143\x6f\155\x5f\x69\x6d\x61\x67\x65\146\x69\x6c\145\40\x53\x45\x54\x20\140\x73\164\141\164\x75\x73\x60\x20\x3d\x20" . (int) $compression_status["\151\x67\156\157\162\145\x64"] . "\x2c\x20\x60\157\x72\x6b\x5f\151\x6e\x66\157\140\x3d\40\x22" . pSQL(json_encode($ork_info)) . "\x22\x20\x57\x48\x45\x52\x45\x20\140\151\x64\x5f\x73\x74\x6f\162\x65\x63\157\x6d\137\151\155\x61\147\x65\146\x69\154\145\140\x20\75\40" . (int) $distant_image["\x69\x64\x69\155\147"]; goto nbCdo; default: goto Z76pP; Iqetp: $sql[] = "\x55\120\104\101\x54\105\x20" . _DB_PREFIX_ . "\x73\x74\157\x72\145\x63\157\155\x5f\x69\x6d\x61\x67\145\x66\151\154\145\xa\40\x20\40\40\40\x20\x20\40\x20\40\x20\x20\40\x20\40\x20\x20\x20\40\40\x20\x20\x20\40\40\x20\40\x20\40\x20\x20\40\40\x20\x20\40\x20\x20\x20\40\40\40\40\40\40\x20\x20\40\x20\x20\40\x20\x20\40\40\x20\x53\x45\124\x20\140\163\164\x61\x74\165\x73\140\40\75\40" . (int) $compression_status["\143\157\155\160\x72\145\x73\163\145\144"] . "\x2c\xa\40\x20\x20\40\x20\x20\40\x20\40\40\x20\x20\40\40\40\40\x20\40\40\40\40\40\x20\40\x20\40\40\40\x20\40\x20\x20\40\40\40\40\40\40\x20\40\40\x20\x20\x20\40\40\40\40\x20\40\x20\40\x20\40\x20\40\x60\163\x69\172\x65\137\x63\157\x6d\x70\x72\x65\x73\163\x65\144\x60\75" . (int) $distant_image["\x73\151\x7a\145\x5f\143\157\155\160\162\x65\x73\x73\x65\x64"] . "\54\xa\x20\x20\x20\x20\40\40\x20\x20\x20\40\40\40\x20\40\40\40\x20\x20\x20\40\40\x20\40\40\40\x20\x20\x20\40\40\40\40\x20\40\x20\x20\x20\40\x20\x20\x20\40\x20\x20\40\x20\40\40\x20\40\x20\x20\x20\x20\x20\40\140\x6f\x72\153\137\151\156\x66\157\x60\75\x20\42" . pSQL(json_encode($ork_info)) . "\42\12\x20\x20\40\40\40\40\40\40\x20\40\x20\x20\x20\x20\x20\x20\40\x20\x20\x20\x20\x20\x20\40\40\40\x20\40\x20\x20\x20\x20\x20\40\x20\40\x20\x20\40\40\x20\40\x20\x20\40\40\40\x20\x20\40\40\40\40\40\x20\x20\x57\x48\105\122\105\40\x60\151\144\x5f\x73\x74\x6f\x72\x65\143\157\x6d\x5f\151\155\x61\x67\x65\146\151\154\145\140\40\x3d\x20" . $distant_image["\x69\x64\151\155\x67"]; goto eZD6_; K6p35: $origin_size = filesize($local_image_path); goto t16x9; itPUI: $sql[] = "\125\x50\104\x41\x54\105\x20" . _DB_PREFIX_ . "\163\164\x6f\162\x65\143\x6f\x6d\137\151\155\141\x67\145\x66\151\154\145\40\x53\105\x54\40\x60\x73\164\141\164\x75\163\140\x20\x3d\x20" . (int) $compression_status["\145\x72\162\157\x72"] . "\x2c\x20\x60\157\x72\x6b\x5f\151\x6e\146\x6f\x60\75\40\42" . pSQL(json_encode($ork_info)) . "\x22\x20\127\110\105\x52\x45\x20\140\151\x64\137\163\x74\x6f\162\x65\x63\157\x6d\x5f\x69\155\141\147\x65\146\x69\x6c\145\140\x20\x3d\x20" . (int) $distant_image["\151\144\x69\x6d\x67"]; goto dWieJ; LmAYv: if ($compressed_image_data !== false && validImage($compressed_image_data)) { goto h5C19; } goto R52SP; R52SP: $ork_info["\x63\x61\154\154\x69\156\147\137\x69\x6d\x67\x5f\x74\157\137\x73\141\166\x65"] = json_decode($compressed_image_data); goto itPUI; rhnWE: $sql[] = "\125\120\x44\101\124\105\x20" . _DB_PREFIX_ . "\163\164\157\x72\145\143\157\x6d\137\151\155\141\x67\145\146\x69\154\x65\x20\123\105\124\40\140\x73\164\141\x74\x75\x73\140\40\75\40" . (int) $compression_status["\x69\147\x6e\157\162\145\x64"] . "\54\x20\140\x6f\x72\153\x5f\151\156\146\157\x60\75\40\42" . pSQL(json_encode($ork_info)) . "\42\x20\x57\110\x45\x52\105\x20\x60\x69\x64\137\x73\x74\x6f\x72\145\x63\157\x6d\x5f\x69\155\141\x67\x65\146\x69\154\x65\140\40\75\40" . (int) $distant_image["\x69\x64\151\x6d\147"]; goto iZPEN; CNNvx: $ork_info["\157\x72\x6b\137\x65\x72\x72\x6f\162\x5f\x64\x65\x74\x61\x69\154"] = array("\105\x52\x52\137\x49\x4d\107\x3a\40\167\x72\x6f\156\x67\x20\x63\157\155\x70\x72\145\163\x73\145\x64\137\x75\x72\154", $distant_image["\x63\157\155\x70\x72\145\x73\163\x65\x64\x5f\x75\162\x6c"]); goto PrXvA; S_04U: h5C19: goto qf3Hv; hgJvp: FS28q: goto Bqn1N; a7BKa: goto QE4Wt; goto Zn7HE; d7MgG: $sql[] = "\x55\x50\x44\101\x54\x45\x20" . _DB_PREFIX_ . "\x73\164\x6f\162\x65\143\157\155\137\x69\x6d\141\x67\x65\146\151\x6c\145\x20\123\x45\124\x20\140\163\x74\x61\164\165\163\140\x20\75\x20" . (int) $compression_status["\x65\x72\162\x6f\x72"] . "\54\40\140\x6f\162\153\137\x69\156\x66\157\x60\75\40\42" . pSQL(json_encode($ork_info)) . "\x22\40\127\110\105\x52\x45\40\140\x69\144\137\163\164\x6f\162\x65\x63\157\155\x5f\151\155\x61\147\x65\x66\151\154\145\140\x20\x3d\40" . (int) $distant_image["\151\x64\151\x6d\147"]; goto iE6AJ; Zn7HE: I9M2_: goto JFDH9; eNtas: eb2xB: goto Iqetp; dWieJ: goto pdK93; goto S_04U; bPE7Y: if ($write_file !== false) { goto eb2xB; } goto Ho1b8; Of9nc: LppdD: goto LmAYv; FiYNI: $ork_info["\157\x72\153\x5f\145\162\162\x6f\x72\x5f\144\x65\164\x61\151\154"] = array("\105\122\x52\x5f\x49\115\x47\72\x20\145\155\x70\164\171\x20\151\x6d\x61\x67\x65\40\144\141\164\x61", $distant_image["\143\x6f\x6d\x70\x72\x65\x73\x73\x65\144\x5f\165\162\x6c"]); goto rl6wA; R08Fk: QjI52: goto loLay; JRa56: if (!empty($distant_image["\143\157\155\x70\x72\145\x73\x73\145\x64\x5f\165\x72\154"]) && is_string($distant_image["\x63\157\155\x70\162\x65\163\x73\x65\x64\x5f\165\162\x6c"]) && filter_var($distant_image["\x63\157\x6d\160\x72\x65\x73\163\x65\144\137\165\162\154"], FILTER_VALIDATE_URL) !== false && $compressed_domain_url === $domain_compressor) { goto I9M2_; } goto CNNvx; t16x9: if ($distant_image["\163\x69\172\145\x5f\x63\157\155\x70\162\145\163\x73\145\144"] <= $origin_size) { goto QjI52; } goto wMWAO; Ho1b8: $ork_info["\x6f\162\153\137\145\x72\162\157\162\137\x64\x65\164\x61\x69\x6c"] = array("\105\122\x52\137\x49\115\x47\72\40\111\x6d\160\157\163\163\x69\x62\154\145\x20\164\x6f\x20\167\162\151\164\x65\40\154\x6f\143\141\154\x20\146\151\x6c\x65", $current_local_image["\160\141\x74\150"]); goto d7MgG; JFDH9: $current_local_image = $local_images[$distant_image["\151\x64\151\155\x67"]]; goto GfCaV; eZD6_: Hptuw: goto hgJvp; iE6AJ: goto Hptuw; goto eNtas; GzqoC: QE4Wt: goto rIWsj; Bqn1N: pdK93: goto lihjr; qf3Hv: $local_image_path = _PS_ROOT_DIR_ . $current_local_image["\160\141\x74\x68"]; goto K6p35; Z76pP: $compressed_domain_url = parse_url($distant_image["\x63\157\x6d\x70\x72\x65\x73\x73\x65\x64\137\165\162\154"], PHP_URL_HOST); goto Sr2uI; wMWAO: $ork_info["\x6f\162\x6b\x5f\163\x74\x61\164\165\163\x5f\x6d\145\163\x73\141\x67\x65"] = "\x53\151\172\145\x20\x63\157\155\160\x72\145\163\x73\145\144\40\x69\x73\40\x68\151\x67\x68\x65\162\x20\164\x68\141\156\x20\x6f\162\151\147\x69\156\141\x6c"; goto rhnWE; PrXvA: $sql[] = "\x55\120\x44\x41\124\105\x20" . _DB_PREFIX_ . "\x73\164\x6f\x72\145\143\x6f\x6d\137\151\155\x61\x67\145\146\x69\x6c\x65\x20\x53\x45\x54\x20\140\x73\164\141\x74\165\x73\x60\40\75\40" . (int) $compression_status["\145\162\162\157\162"] . "\x2c\40\x60\157\x72\x6b\x5f\x69\x6e\146\x6f\140\x3d\40\x22" . pSQL(json_encode($ork_info)) . "\42\x20\127\x48\x45\122\105\x20\140\151\x64\x5f\x73\164\x6f\x72\x65\143\157\x6d\x5f\151\155\141\x67\145\146\151\x6c\145\x60\40\x3d\40" . (int) $distant_image["\x69\144\151\155\x67"]; goto a7BKa; Sr2uI: $compressed_domain_url = hash("\163\x68\x61\x32\x35\66", $compressed_domain_url, false); goto JRa56; Dd0Pa: if (!empty($compressed_image_data)) { goto LppdD; } goto FiYNI; rl6wA: $sql[] = "\x55\120\x44\101\x54\105\40" . _DB_PREFIX_ . "\163\x74\x6f\x72\145\x63\157\x6d\x5f\x69\155\141\x67\x65\146\151\154\145\x20\123\x45\124\40\x60\x73\x74\x61\164\165\163\140\40\x3d\x20" . (int) $compression_status["\x65\162\162\157\x72"] . "\54\x20\140\157\162\x6b\137\151\156\146\x6f\x60\x3d\x20\42" . pSQL(json_encode($ork_info)) . "\42\x20\x57\110\105\122\x45\x20\140\x69\x64\x5f\163\164\157\x72\145\x63\x6f\155\x5f\x69\155\141\x67\x65\x66\x69\x6c\x65\140\40\x3d\40" . (int) $distant_image["\x69\144\151\x6d\147"]; goto MHzif; iZPEN: goto FS28q; goto R08Fk; loLay: $write_file = file_put_contents($local_image_path, $compressed_image_data); goto bPE7Y; GfCaV: $compressed_image_data = sc_file_get_contents($distant_image["\x63\157\x6d\x70\x72\x65\x73\x73\x65\144\137\x75\162\154"]); goto Dd0Pa; MHzif: goto xZec6; goto Of9nc; lihjr: xZec6: goto GzqoC; rIWsj: } goto vCwyf; MGU7N: goto o9mpx; goto Tbrrm; Tbrrm: bBdBV: goto KaDQQ; KWWSI: SCI::addLog($log_id . "\x20\x45\122\x52\137\111\x4d\x47\x3a\40\x57\162\x6f\x6e\x67\x20\151\x6d\141\x67\x65\40\x61\x75\x74\150\40\72\40" . $distant_image["\x75\x72\x6c"], 1, null, null, null, true); goto MGU7N; vCwyf: jKyxK: goto FKiF1; B9Uwk: kYl3M: goto DuI27; xydXi: } goto FWR26; CsLU3: if (!empty($local_images)) { goto br42h; } goto KvAkk; If_Vo: $param_err[] = "\141\x75\x74\150"; goto V3AGx; TEyfv: fgNeE: goto wRL2T; ZuUDx: $param_err = array(); goto wuPLZ; XPFsj: if (empty($sql)) { goto eSjSF; } goto EzBPQ; mB4eE: EvxAA: goto B4AmS; IO526: cSej3: goto oX_0H; VKlPe: t7Ryo: goto PEDod; ofryg: die; goto kisDm; DNj8P: $distant_images = json_decode(file_get_contents("\x70\x68\x70\72\x2f\57\151\156\x70\165\164"), true); goto w3Mgt; Wa1Dg: $param_err[] = "\144\151\x73\164\141\156\164\x5f\x69\x6d\141\147\145\163"; goto aifQ2; Wd8LD: if (!empty($_SERVER["\x48\124\124\x50\x5f\x4f\103\111\x41\125\124\x48"])) { goto oPeXc; } goto xrjTN; Q6SSk: $log_id = "\123\103\x5f\111\x6d\147\x43\x5f\143\x61\x6c\x6c\x62\141\x63\x6b"; goto AZxRp; ENwpy: $distant_version = (string) $_SERVER["\110\x54\x54\120\137\x4f\x43\111\126\105\122\123\x49\117\x4e"]; goto Ycbxl; ZSg10: die; goto WrVUR; g6zHC: r2UPk: goto dB626; PnxyK: require_once "\x2e\56\x2f\56\56\57\x2e\x2e\57\x2e\56\57\143\157\156\x66\151\x67\x2f\143\157\156\146\151\147\x2e\151\x6e\143\56\160\150\x70"; goto Q6SSk; Ycbxl: $distant_secret = (string) $_SERVER["\110\x54\124\120\x5f\117\103\111\123\x45\103\x52\x45\124"]; goto J7Vgt; Uj2hQ: if (version_compare(_PS_VERSION_, "\61\56\x36\x2e\60\56\x33", "\x3e\x3d")) { goto gCH8_; } goto t7Xm0; JZjkL: $param_err[] = "\163\x65\x63\162\145\164"; goto NKQWM; K53v8: goto DiFCI; goto zZUtr; zZUtr: AdrlM: goto GJTJ9; eukFA: $local_cached_image = array(); goto kVAvU; EJp3h: br42h: goto aOyaA; w3Mgt: if (!(!array_key_exists("\x48\124\x54\120\x5f\117\103\x49\101\x55\124\x48", $_SERVER) || !array_key_exists("\x48\x54\124\x50\137\x4f\x43\111\x56\105\122\123\x49\117\x4e", $_SERVER) || !array_key_exists("\110\x54\x54\x50\137\x4f\x43\x49\x53\x45\103\x52\x45\x54", $_SERVER))) { goto t8Mmd; } goto M0Cz0; uAc9U: goto paYZf; goto ugaGS; q6ONi: $current_sc_module_folder_name = basename(realpath("\56\56\x2f\x2e\56\x2f")); goto HaOxZ; hEsEB: if (!($local_auth !== $distant_auth || $local_version !== $distant_version || $local_secret !== $distant_secret || !is_array($distant_images))) { goto WqJIv; } goto ZuUDx; aOyaA: $tmp = array(); goto yrPUE; yrPUE: foreach ($local_images as $local_image) { $tmp[$local_image["\x69\x64\x5f\x73\164\157\162\145\x63\x6f\155\137\x69\x6d\x61\147\x65\146\151\154\145"]] = $local_image; xtBNi: } goto IO526; aNl78: if (!(empty($_SERVER["\x48\124\x54\120\x5f\117\x43\111\101\x55\x54\110"]) || empty($_SERVER["\x48\124\124\120\137\117\x43\111\126\x45\x52\123\111\x4f\116"]) || empty($_SERVER["\110\x54\x54\120\137\x4f\103\111\123\105\x43\122\x45\124"]) || empty($distant_images))) { goto mxZzT; } goto XRDoG; nAZ6T: $param_err[] = "\166\145\162\x73\151\x6f\156"; goto sdKRp; X4Hr7: oPeXc: goto qqxA_; KvAkk: SCI::addLog($log_id . "\40\x45\x52\122\137\111\115\107\72\40\x65\x6d\160\164\x79\x20\154\157\x63\141\154\137\x69\155\x61\x67\145\x73", 1, null, null, null, true); goto ofryg; dB626: if (!empty($distant_images)) { goto c7GxK; } goto Wa1Dg; xrjTN: $param_err[] = "\x61\x75\x74\x68"; goto X4Hr7; WrVUR: t8Mmd: goto aNl78; fQ_Nf: Logger::addLog($log_id . "\x20\x45\x52\x52\72\40\x45\155\160\x74\x79\x20\x70\141\x72\x61\155\x20\72\x20" . implode("\54", $param_err), 1, null, null, null, true); goto K53v8; aG4iP: require_once _PS_MODULE_DIR_ . SC_MODULE_FOLDER_NAME . "\57" . $sc_folder_hash . "\x2f\x53\x43\x2f\154\x69\142\57\x73\145\x72\x2f\167\x69\x6e\x2d\151\x6d\141\x67\145\x63\157\x6d\x70\x72\x65\x73\163\x69\x6f\156\57\x73\145\x72\x5f\167\151\x6e\x2d\151\x6d\141\147\145\x63\x6f\x6d\x70\x72\145\x73\163\x69\x6f\156\137\164\x6f\x6f\x6c\x73\x2e\x70\x68\160"; goto FvAcK; VBjy_: header("\110\124\x54\x50\57\61\x2e\60\40\x34\x30\61\x20\127\x72\157\x6e\147\x20\x70\141\x72\141\x6d\x65\x74\145\162"); goto fjYsT; AZxRp: $_POST = null; goto DNj8P; VLUom: function validImage($file_content) { $size = getimagesizefromstring($file_content); return strtolower(substr($size["\155\151\x6d\145"], 0, 5)) == "\151\x6d\141\147\145" ? true : false; }
